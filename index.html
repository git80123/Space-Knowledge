<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>太空探索</title>
  <style>
    body { font-family: sans-serif; background: #000; color: #fff; text-align: center; padding: 2em; }
    input { padding: 0.5em; font-size: 1em; width: 300px; }
    button { padding: 0.5em 1em; font-size: 1em; margin-left: 1em; }
    #wiki-result, #nasa-result { margin-top: 2em; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
    img { max-width: 100%; display: block; margin: 1em auto; }
    .search-section { margin-bottom: 3em; }
    h2 { margin-bottom: 0.5em; }
  </style>
</head>
<body>
  <h1>🌌 太空探索知识网站</h1>
  
  <div class="search-section">
    <h2>维基百科太空知识搜索</h2>
    <input type="text" id="wiki-keyword" placeholder="输入太空相关词语" />
    <button onclick="searchWiki()">搜索</button>
    <div id="wiki-result"></div>
  </div>
  
  <div class="search-section">
    <h2>NASA 每日天文图片</h2>
    <button onclick="searchNasa()">获取今日图片</button>
    <div id="nasa-result"></div>
  </div>
  
  <script>
    async function searchWiki() {
      const input = document.getElementById('wiki-keyword').value.trim();
      const resultDiv = document.getElementById('wiki-result');
      if (!input) {
        resultDiv.innerHTML = "<p>请输入关键词。</p>";
        return;
      }
      const wikiUrl = "https://zh.wikipedia.org/api/rest_v1/page/summary/" + encodeURIComponent(input);
      try {
        const response = await fetch(wikiUrl);
        if (response.ok) {
          const data = await response.json();
          resultDiv.innerHTML = '<h3>' + data.title + '</h3><p>' + data.extract + '</p>';
        } else {
          resultDiv.innerHTML = "<p>未找到相关信息。</p>";
        }
      } catch (e) {
        resultDiv.innerHTML = "<p>搜索出现错误，请稍后再试。</p>";
      }
    }

    async function searchNasa() {
      const resultDiv = document.getElementById('nasa-result');
      const nasaUrl = "https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY";
      resultDiv.innerHTML = "<p>加载中...</p>";
      try {
        const res = await fetch(nasaUrl);
        if (!res.ok) throw new Error("NASA API 请求失败");
        const data = await res.json();
        let media = "";
        if (data.media_type === "image") {
          media = `<img src="${data.url}" alt="NASA 天文图片" />`;
        } else if (data.media_type === "video") {
          media = `<iframe src="${data.url}" width="100%" height="400" allowfullscreen></iframe>`;
        }
        resultDiv.innerHTML = `
          <h3>${data.title}</h3>
          ${media}
          <p>${data.explanation}</p>
          <p>图片版权: ${data.copyright || "Public Domain"}</p>
        `;
      } catch (e) {
        resultDiv.innerHTML = "<p>无法获取NASA天文图片。</p>";
      }
    }
  </script>
</body>
</html>
